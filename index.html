<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Shelf - ã‚²ãƒ¼ãƒ ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</title>
    <meta name="description" content="å€‹äººã‚²ãƒ¼ãƒ ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ - ãŠæ°—ã«å…¥ã‚Šã®ã‚²ãƒ¼ãƒ ã‚’ç¾ã—ãå±•ç¤º">
    
    <!-- Open Graph for social sharing -->
    <meta property="og:title" content="Game Shelf - ã‚²ãƒ¼ãƒ ãƒ©ã‚¤ãƒ–ãƒ©ãƒª">
    <meta property="og:description" content="ãŠæ°—ã«å…¥ã‚Šã‚²ãƒ¼ãƒ ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³">
    <meta property="og:type" content="website">
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ®</text></svg>">
    <link rel="stylesheet" href="css/gameshelf.css">

</head>
<body>
    <header class="header">
        <div class="container">
            <h1 class="header-title">ğŸ® Game Shelf</h1>
            <p class="header-subtitle">ã‚²ãƒ¼ãƒ ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</p>
            
            <div class="header-controls">
                <div class="collection-controls">
                    <select id="collection-selector" class="collection-selector">
                        <option value="all">ğŸ® å…¨ã¦ã®ã‚²ãƒ¼ãƒ </option>
                    </select>
                    <button id="manage-collections" class="btn btn-outline">ğŸ“ ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†</button>
                </div>
                
                <div class="view-toggle">
                    <button id="view-covers" class="btn btn-primary active">ã‚«ãƒãƒ¼è¡¨ç¤º</button>
                    <button id="view-list" class="btn btn-secondary">ãƒªã‚¹ãƒˆè¡¨ç¤º</button>
                </div>
                
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="ã‚¿ã‚¤ãƒˆãƒ«ã‚„é–‹ç™ºè€…ã§æ¤œç´¢...">
                </div>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <aside class="sidebar">
                <div class="filter-section">
                    <h3>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</h3>
                    
                    <div class="filter-group">
                        <label>ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </label>
                        <div class="platform-filter-checkboxes">
                            <label class="checkbox-label">
                                <input type="checkbox" id="platform-pc" value="PC" checked>
                                ğŸ–¥ï¸ PC
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="platform-playstation" value="PlayStation" checked>
                                ğŸ® PlayStation
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="platform-xbox" value="Xbox" checked>
                                ğŸ® Xbox
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="platform-nintendo" value="Nintendo" checked>
                                ğŸ® Nintendo
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="platform-steam" value="Steam" checked>
                                ğŸš‚ Steam
                            </label>
                        </div>
                    </div>
                    
                    <div class="filter-group">
                        <label>å®Œäº†çŠ¶æ³</label>
                        <div class="completion-filter-checkboxes">
                            <label class="checkbox-label">
                                <input type="checkbox" id="completion-not-started" value="not_started" checked>
                                âšª æœªãƒ—ãƒ¬ã‚¤
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="completion-in-progress" value="in_progress" checked>
                                ğŸŸ¡ ãƒ—ãƒ¬ã‚¤ä¸­
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="completion-completed" value="completed" checked>
                                ğŸŸ¢ å®Œäº†
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="completion-abandoned" value="abandoned" checked>
                                ğŸ”´ ä¸­æ–­
                            </label>
                        </div>
                    </div>
                    
                    <div class="filter-group">
                        <label>ã‚¸ãƒ£ãƒ³ãƒ«</label>
                        <div class="genre-filter-checkboxes" id="genre-filter-checkboxes">
                            <!-- Genre filters will be dynamically populated -->
                        </div>
                    </div>
                    
                    <div class="filter-group">
                        <label>æ˜Ÿè©•ä¾¡ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</label>
                        <div class="star-filter-checkboxes">
                            <label class="checkbox-label">
                                <input type="checkbox" id="star-1" value="1" checked>
                                â­ æ˜Ÿ1
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="star-2" value="2" checked>
                                â­â­ æ˜Ÿ2
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="star-3" value="3" checked>
                                â­â­â­ æ˜Ÿ3
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="star-4" value="4" checked>
                                â­â­â­â­ æ˜Ÿ4
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="star-5" value="5" checked>
                                â­â­â­â­â­ æ˜Ÿ5
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="star-0" value="0" checked>
                                â˜† æœªè©•ä¾¡
                            </label>
                        </div>
                    </div>
                    
                    <div class="filter-group">
                        <label>ä¸¦ã³é †</label>
                        <select id="sort-order">
                            <option value="custom" selected>ã‚«ã‚¹ã‚¿ãƒ é †</option>
                            <option value="acquiredTime">è¿½åŠ æ—¥</option>
                            <option value="title">ã‚¿ã‚¤ãƒˆãƒ«</option>
                            <option value="developer">é–‹ç™ºè€…</option>
                            <option value="publisher">ç™ºå£²å…ƒ</option>
                            <option value="releaseDate">ç™ºå£²æ—¥</option>
                            <option value="rating">è©•ä¾¡</option>
                            <option value="completionStatus">å®Œäº†çŠ¶æ³</option>
                        </select>
                        <button id="sort-direction" class="btn btn-small">â†“ æ–°ã—ã„é †</button>
                    </div>
                    
                    <div class="filter-group">
                        <label>è¡¨ç¤ºæ•°</label>
                        <select id="games-per-page">
                            <option value="25">25ã‚²ãƒ¼ãƒ </option>
                            <option value="50" selected>50ã‚²ãƒ¼ãƒ </option>
                            <option value="100">100ã‚²ãƒ¼ãƒ </option>
                            <option value="200">200ã‚²ãƒ¼ãƒ </option>
                            <option value="all">å…¨ã¦è¡¨ç¤º</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label>ã‚«ãƒãƒ¼ã‚µã‚¤ã‚º</label>
                        <select id="cover-size">
                            <option value="small">å° (120Ã—180px)</option>
                            <option value="medium" selected>ä¸­ (160Ã—240px)</option>
                            <option value="large">å¤§ (200Ã—300px)</option>
                        </select>
                    </div>
                </div>
                
                <div class="stats-section">
                    <h3>çµ±è¨ˆæƒ…å ±</h3>
                    <div class="stats">
                        <div class="stat-item">
                            <span class="stat-value" id="total-games">-</span>
                            <span class="stat-label">ç·ã‚²ãƒ¼ãƒ æ•°</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="total-platforms">-</span>
                            <span class="stat-label">ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ•°</span>
                        </div>
                    </div>
                    
                    <div class="library-management">
                        <h3>ã‚²ãƒ¼ãƒ ç®¡ç†</h3>
                        <div class="management-buttons">
                            <button id="import-steam" class="btn btn-secondary">ğŸ“¥ Steamã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
                            <button id="add-game-manually" class="btn btn-secondary">ğŸ” ã‚²ãƒ¼ãƒ æ¤œç´¢ãƒ»è¿½åŠ </button>
                            <button id="wikipedia-test" class="btn btn-secondary">ğŸ” Wikipedia ãƒ†ã‚¹ãƒˆ</button>
                            <button id="export-unified" class="btn btn-secondary">ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
                            <button id="clear-library" class="btn btn-danger">ğŸ—‘ï¸ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¯ãƒªã‚¢</button>
                        </div>
                    </div>
                </div>
            </aside>

            <section class="bookshelf-container">
                <div class="loading" id="loading">
                    ğŸ® ã‚²ãƒ¼ãƒ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æº–å‚™ä¸­...
                </div>
                
                <!-- Game Shelf Overview Section -->
                <div class="bookshelves-overview" id="bookshelves-overview" style="display: none;">
                    <h2 class="section-title">ğŸ® ã‚²ãƒ¼ãƒ æ£šä¸€è¦§</h2>
                    <div class="bookshelf-overview-controls">
                        <button id="toggle-bookshelf-display" class="btn btn-secondary">ğŸ–¼ï¸ ç”»åƒè¡¨ç¤ºåˆ‡æ›¿</button>
                    </div>
                    <div class="bookshelves-grid" id="bookshelves-grid">
                        <!-- Game shelves overview will be loaded here -->
                    </div>
                </div>
                
                <div class="bookshelf" id="bookshelf">
                    <!-- Games will be dynamically loaded here -->
                </div>
                
                <div class="pagination" id="pagination">
                    <!-- Pagination controls will be added here -->
                </div>
            </section>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>Â© 2025 ãƒã‚¤ãƒœãƒ¼ | Powered by Steam & Wikipedia</p>
            <p class="affiliate-disclosure">
                âš ï¸ <strong>ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹:</strong> ã“ã®ã‚µã‚¤ãƒˆã¯Steam APIã€Wikipediaã€Wikidataã‹ã‚‰
                ã‚²ãƒ¼ãƒ æƒ…å ±ã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚
            </p>
            <p>
                <a href="https://github.com/mybo/game-shelf-template" target="_blank" rel="noopener">
                    GitHub Repository
                </a>
            </p>
        </div>
    </footer>

    <!-- Game detail modal -->
    <div class="modal" id="game-modal">
        <div class="modal-content">
            <button class="modal-close" id="modal-close">Ã—</button>
            <div class="modal-body" id="modal-body">
                <!-- Game details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Collection Management Modal -->
    <div id="collection-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="collection-modal-close">Ã—</button>
            <div class="modal-header">
                <h2>ğŸ“š ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†</h2>
                <button id="add-collection" class="btn btn-primary">+ æ–°ã—ã„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³</button>
            </div>
            <div id="collections-list">
                <!-- Collections will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Collection Form Modal -->
    <div id="collection-form-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="collection-form-modal-close">Ã—</button>
            <div class="modal-header">
                <h2 id="collection-form-title">ğŸ“š æ–°ã—ã„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³</h2>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="collection-name">ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å *</label>
                    <input type="text" id="collection-name" placeholder="ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" required>
                </div>
                <div class="form-group">
                    <label for="collection-emoji">çµµæ–‡å­—</label>
                    <input type="text" id="collection-emoji" placeholder="ğŸ“" value="ğŸ“" maxlength="2">
                </div>
                <div class="form-group">
                    <label for="collection-description">èª¬æ˜</label>
                    <textarea id="collection-description" placeholder="ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä»»æ„ï¼‰" rows="3"></textarea>
                </div>
                <div class="form-actions" style="margin-top: 2rem; display: flex; gap: 1rem; justify-content: flex-end;">
                    <button id="cancel-collection-form" class="btn btn-secondary">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    <button id="save-collection-form" class="btn btn-primary">ä¿å­˜</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Collection Overview Modal -->
    <div id="collection-overview-modal" class="modal">
        <div class="modal-content large">
            <button class="modal-close" id="collection-overview-modal-close">Ã—</button>
            <div class="modal-header">
                <h2 id="collection-overview-title">ğŸ“š ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³è©³ç´°</h2>
                <div class="collection-actions">
                    <button id="edit-collection" class="btn btn-secondary">âœï¸ ç·¨é›†</button>
                    <button id="delete-collection" class="btn btn-danger">ğŸ—‘ï¸ å‰Šé™¤</button>
                </div>
            </div>
            <div class="modal-body">
                <div id="collection-overview-content">
                    <!-- Collection overview content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Game Management Modals -->
    <!-- Steam Import Modal -->
    <div id="import-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="import-modal-close">Ã—</button>
            <div class="modal-header">
                <h2>ğŸ“¥ Steamãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h2>
            </div>
            <div class="modal-body">
                <div class="import-options">
                    <div class="import-option">
                        <h3>ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h3>
                        <input type="file" id="steam-file-input" accept=".json" />
                        <button id="import-from-file" class="btn btn-primary">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
                    </div>
                </div>
                <div id="game-selection" class="game-selection" style="display: none;">
                    <h3>ğŸ® ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã‚²ãƒ¼ãƒ ã‚’é¸æŠ</h3>
                    <div class="selection-controls">
                        <button id="select-all-games" class="btn btn-small">å…¨ã¦é¸æŠ</button>
                        <button id="deselect-all-games" class="btn btn-small">å…¨ã¦è§£é™¤</button>
                        <span class="selected-count">é¸æŠ: <span id="selected-count">0</span>æœ¬</span>
                    </div>
                    <div id="game-list" class="game-selection-list">
                        <!-- Game selection checkboxes will be populated here -->
                    </div>
                    <div class="import-actions">
                        <button id="import-selected-games" class="btn btn-primary" disabled>é¸æŠã—ãŸã‚²ãƒ¼ãƒ ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
                        <button id="cancel-import" class="btn btn-secondary">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    </div>
                </div>
                <div id="import-results" class="import-results" style="display: none;">
                    <!-- Import results will be shown here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Manual Game Addition Modal -->
    <div id="add-game-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="add-game-modal-close">Ã—</button>
            <div class="modal-header">
                <h2>â• æ‰‹å‹•ã§ã‚²ãƒ¼ãƒ ã‚’è¿½åŠ </h2>
            </div>
            <div class="modal-body">
                <div class="add-game-options">
                    <div class="add-option">
                        <h3>ã‚²ãƒ¼ãƒ ã®æƒ…å ±ã‚’å…¥åŠ›</h3>
                        <div class="form-group">
                            <label for="manual-steam-id">Steam ID</label>
                            <input type="text" id="manual-steam-id" placeholder="123456" />
                        </div>
                        <div class="form-group">
                            <label for="manual-title">ã‚¿ã‚¤ãƒˆãƒ«</label>
                            <input type="text" id="manual-title" placeholder="ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒˆãƒ«" />
                        </div>
                        <div class="form-group">
                            <label for="manual-developer">é–‹ç™ºè€…</label>
                            <input type="text" id="manual-developer" placeholder="é–‹ç™ºè€…å" />
                        </div>
                        <div class="form-group">
                            <label for="manual-platform">ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </label>
                            <input type="text" id="manual-platform" placeholder="PC, PlayStation, Nintendo Switch" />
                        </div>
                        <button id="add-manually" class="btn btn-primary">æ‰‹å‹•è¿½åŠ </button>
                    </div>
                </div>
                <div id="add-game-results" class="add-results" style="display: none;">
                    <!-- Addition results will be shown here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Wikipedia Test Modal -->
    <div id="wikipedia-test-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="wikipedia-test-modal-close">Ã—</button>
            <div class="modal-header">
                <h2>ğŸ” Wikipedia ã‚²ãƒ¼ãƒ æƒ…å ±ãƒ†ã‚¹ãƒˆ</h2>
            </div>
            <div class="modal-body">
                <div class="wikipedia-test-content">
                    <p>ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦Wikipediaã‹ã‚‰æƒ…å ±ã‚’å–å¾—ã—ã¦ã¿ã¾ã—ã‚‡ã†</p>
                    <div class="form-group">
                        <label for="wikipedia-game-title">ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒˆãƒ«</label>
                        <input type="text" id="wikipedia-game-title" placeholder="ä¾‹: The Legend of Zelda Breath of the Wild" />
                    </div>
                    <button id="test-wikipedia" class="btn btn-primary">Wikipediaæ¤œç´¢</button>
                    <div id="wikipedia-results" style="margin-top: 20px; display: none;">
                        <!-- Wikipedia test results will be shown here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Save indicator -->
    <div class="save-indicator" id="save-indicator">ğŸ’¾ ä¿å­˜ã—ã¾ã—ãŸ</div>

    <script src="js/wikipedia-service.js"></script>
    <script src="js/wikidata-service.js"></script>
    <script src="js/game-manager.js"></script>
    <script src="js/collection-manager.js"></script>
    <script src="js/collection-ui.js"></script>
    <script src="js/search-manager.js"></script>
    <script src="js/search-ui.js"></script>
    <script src="js/sample-games.js"></script>
    <script src="js/gameshelf.js"></script>
    <script>
        // Wikipedia test functionality
        document.addEventListener('DOMContentLoaded', function() {
            const wikipediaTestBtn = document.getElementById('wikipedia-test');
            const wikipediaTestModal = document.getElementById('wikipedia-test-modal');
            const wikipediaTestModalClose = document.getElementById('wikipedia-test-modal-close');
            const testWikipediaBtn = document.getElementById('test-wikipedia');
            
            if (wikipediaTestBtn) {
                wikipediaTestBtn.addEventListener('click', function() {
                    wikipediaTestModal.style.display = 'block';
                });
            }
            
            if (wikipediaTestModalClose) {
                wikipediaTestModalClose.addEventListener('click', function() {
                    wikipediaTestModal.style.display = 'none';
                });
            }
            
            if (testWikipediaBtn) {
                testWikipediaBtn.addEventListener('click', async function() {
                    const gameTitle = document.getElementById('wikipedia-game-title').value.trim();
                    const resultsDiv = document.getElementById('wikipedia-results');
                    
                    if (!gameTitle) {
                        alert('ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                        return;
                    }
                    
                    resultsDiv.style.display = 'block';
                    resultsDiv.innerHTML = '<p>ğŸ” Wikipediaã‹ã‚‰æƒ…å ±ã‚’å–å¾—ä¸­...</p>';
                    testWikipediaBtn.disabled = true;
                    
                    try {
                        const wikipediaService = new WikipediaService();
                        const gameData = await wikipediaService.extractGameMetadata(gameTitle);
                        
                        if (gameData) {
                            resultsDiv.innerHTML = `
                                <h3>âœ… å–å¾—æˆåŠŸ: ${gameData.title}</h3>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
                                    <div><strong>é–‹ç™ºè€…:</strong> ${gameData.developer || 'æƒ…å ±ãªã—'}</div>
                                    <div><strong>ç™ºå£²å…ƒ:</strong> ${gameData.publisher || 'æƒ…å ±ãªã—'}</div>
                                    <div><strong>ç™ºå£²æ—¥:</strong> ${gameData.releaseDate || 'æƒ…å ±ãªã—'}</div>
                                    <div><strong>ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ :</strong> ${Array.isArray(gameData.platforms) ? gameData.platforms.join(', ') : 'æƒ…å ±ãªã—'}</div>
                                </div>
                                <div style="margin-top: 15px;">
                                    <strong>èª¬æ˜:</strong><br>
                                    ${gameData.description ? gameData.description.substring(0, 200) + '...' : 'æƒ…å ±ãªã—'}
                                </div>
                                <div style="margin-top: 15px; padding: 10px; background-color: #f8f9fa; border-radius: 5px; font-size: 12px;">
                                    <strong>ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹:</strong> <a href="${gameData.attribution.url}" target="_blank">${gameData.attribution.text}</a><br>
                                    <strong>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹:</strong> <a href="${gameData.attribution.licenseUrl}" target="_blank">${gameData.attribution.license}</a>
                                </div>
                            `;
                        } else {
                            resultsDiv.innerHTML = '<p>âŒ è©²å½“ã™ã‚‹ã‚²ãƒ¼ãƒ æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</p>';
                        }
                    } catch (error) {
                        resultsDiv.innerHTML = `<p>âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${error.message}</p>`;
                        console.error('Wikipedia test error:', error);
                    } finally {
                        testWikipediaBtn.disabled = false;
                    }
                });
            }
            
            // Enter key support for Wikipedia test
            const wikipediaGameTitleInput = document.getElementById('wikipedia-game-title');
            if (wikipediaGameTitleInput) {
                wikipediaGameTitleInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        testWikipediaBtn.click();
                    }
                });
            }
        });
    </script>
</body>
</html>